%table.resources
  %thead
    %tr
      %th= Game.model_name.human
      - %w(sente_user gote_user won_user number).each do |attr_name|
        %th= Game.human_attribute_name(attr_name)
      %th.spec
        = t('user.comment')
      %th.spec
        &nbsp;

  %tbody
    - games.each do |game|
      - decorator = GameDecorator.new game
      - sente_decorator = game.sente_user ? UserDecorator.new(game.sente_user) : nil
      - gote_decorator = game.gote_user ? UserDecorator.new(game.gote_user) : nil
      - won_decorator = game.won_user ? UserDecorator.new(game.won_user) : nil
      %tr
        %td
          = link_to decorator.created_at, game
        %td
          - if sente_decorator
            = sente_decorator.image
            %br
            = sente_decorator.name
        %td
          - if gote_decorator
            = gote_decorator.image
            %br
            = gote_decorator.name
        %td
          - if won_decorator
            = won_decorator.image
            %br
            = won_decorator.name
        %td
          = decorator.number
        %td.spec
          = decorator.facebook_comments_count
        %td.spec
          - if game.of_user? current_user
            = link_to t('actions.destroy'), game, confirm: t('confirms.are_you_sure_'), method: :delete
