- piece_roles = {}
.in_hand{ class: direction }
  .pieces
    .row
      - if reverse ^ (direction == 'upward')
        - pieces = board.sente_hand
        - user = game.sente_user
      - else
        - pieces = board.gote_hand
        - user = game.gote_user
      - user_decorator = UserDecorator.new(user)
      .cell
        - link = !(play && user == current_user)
        = user_decorator.face(link)
      - all_roles = Piece::HAND_ROLES
      - if direction == 'upward'
        - all_roles = all_roles.reverse
      - all_roles.each do |role|
        - number = pieces[role]
        - if user == game.sente_user
          - piece = Piece.new(role)
        - else
          - piece = Piece.new(- role)
        - piece_decorator = PieceDecorator.new piece
        - piece_decorator.reverse = reverse
        - if number >= 1
          .cell
            = piece_decorator.tagify(play)
            .number
              x
              = number
